<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sys-sage: sys-sage Python version documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">sys-sage
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">sys-sage Python version documentation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md35"></a> The sys-sage module is the Python version of the sys-sage library, which was already implemented for C++. This documentation focuses on the Python version of the sys-sage library, here called the sys-sage module. It does not contain a list of all functions, choosing instead to focus more on the key aspects and avoiding redundancy.</p>
<h1><a class="anchor" id="autotoc_md36"></a>
Installation</h1>
<p>To install the <code>sys_sage</code> module from source, ensure that Python and Pybind11 are already installed on your system. You can then use CMake for the installation by setting the flag <code>-DPYBIND=ON</code>.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Module Import</h1>
<p>After installation the module can now be imported: </p><div class="fragment"><div class="line"><span class="keyword">import</span> sys_sage</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md38"></a>
Object initialistaion</h1>
<p>To create Component and Datapath objects, you can utilize the provided initialization functions. For instance, a Component object can be instantiated as follows:</p>
<div class="fragment"><div class="line">c = <a class="code hl_class" href="classsys__sage_1_1_component.html">sys_sage.Component</a>(parent, 0, <span class="stringliteral">&quot;Generic Component&quot;</span>)</div>
<div class="ttc" id="aclasssys__sage_1_1_component_html"><div class="ttname"><a href="classsys__sage_1_1_component.html">sys_sage::Component</a></div><div class="ttdoc">Generic class for all hardware and logical components in sys-sage.</div><div class="ttdef"><b>Definition</b> Component.hpp:36</div></div>
</div><!-- fragment --><p> The sys-sage library exposes all known constructors for <code>Component</code> and its subclasses as Python initialization functions, complete with their default values. In the example above, if the component type is not explicitly provided, it will automatically be assigned <code>None</code> during initialization.</p>
<p>Throughout this documentation, c will consistently refer to a Component object, and d will refer to a Datapath object in all given examples.</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Methods</h1>
<p>Calling class methods in Python is very similar to the C++ version:</p>
<div class="fragment"><div class="line">c.InsertChild(child)</div>
</div><!-- fragment --><p> However, some methods require a workaround. For instance, directly passing a list as an argument to be populated will not work:</p>
<div class="fragment"><div class="line">c.GetAllChildrenByType(children_list, type) <span class="comment"># This will not work as expected</span></div>
</div><!-- fragment --><p> Instead, for methods that take a list of Component or Datapath objects as arguments (which are currently not working as direct in-place modifications), an alternative approach is provided. You should append the results to an existing list, as shown below:</p>
<div class="fragment"><div class="line">children_list += c.GetAllChildrenByType(type)</div>
</div><!-- fragment --><p> In general, for all methods that expect a list of Component or Datapath objects as arguments to be modified in-place, you should use the alternative method of appending the returned list to your existing list.</p>
<p>Finally, certain attributes, such as id and name, are not accessible via standard getters and setters. The specific methods for reading and writing these attributes are detailed in the "Attributes" section of this documentation.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
Module functions</h1>
<p>All of the parsers, that provided by sys-sage library are also included in the Python module:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="caps-numa-benchmark_8hpp.html#af6f071783d703badd5961ab7ad0b848b">sys_sage.parseCapsNumaBenchmark</a>(root,<span class="stringliteral">&quot;benchmark.csv&quot;</span>,<span class="stringliteral">&quot;;&quot;</span>)</div>
<div class="ttc" id="acaps-numa-benchmark_8hpp_html_af6f071783d703badd5961ab7ad0b848b"><div class="ttname"><a href="caps-numa-benchmark_8hpp.html#af6f071783d703badd5961ab7ad0b848b">sys_sage::parseCapsNumaBenchmark</a></div><div class="ttdeci">int parseCapsNumaBenchmark(Component *rootComponent, std::string benchmarkPath, std::string delim=&quot;;&quot;)</div><div class="ttdef"><b>Definition</b> caps-numa-benchmark.cpp:9</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md41"></a>
Attributes</h1>
<h2><a class="anchor" id="autotoc_md42"></a>
Makros / Module Attributes</h2>
<p>In the C++ version of the sys-sage library, macros like SYS_SAGE_COMPONENT_NONE are used to represent specific integer values. The Python module provides an analogous way to access these values for use with functions:</p>
<div class="fragment"><div class="line">c.CountAllSubcomponentsByType(sys_sage.COMPONENT_NONE)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md43"></a>
Properties</h2>
<p>As previously mentioned, some attributes aren't accessed using traditional getters or setters. Instead, <code>sys_sage</code> offers a more Pythonic approach to access them:</p>
<div class="fragment"><div class="line">name = c.name</div>
<div class="line">c.name = <span class="stringliteral">&quot;name&quot;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md44"></a>
Dynamic Attributes</h2>
<p>Similar to the core sys-sage library, users can define their own custom attributes.</p>
<p>For the Component class, dynamic attributes are accessed using the [] operator:</p>
<div class="fragment"><div class="line">c[<span class="stringliteral">&quot;dynamic&quot;</span>] = <span class="stringliteral">&quot;attribute&quot;</span></div>
<div class="line">c[<span class="stringliteral">&quot;dynamic&quot;</span>] <span class="comment"># Returns &quot;attribute&quot;</span></div>
<div class="line">c[0]         <span class="comment"># Returns &quot;attribute&quot; (assuming 0 is the index assigned to &quot;dynamic&quot;)</span></div>
</div><!-- fragment --><p> For Datapath objects, dynamic attributes are treated like basic attributes, allowing direct access:</p>
<div class="fragment"><div class="line">d.dynamic = <span class="stringliteral">&quot;attribute&quot;</span></div>
<div class="line">d.dynamic <span class="comment"># Returns &quot;attribute&quot;</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md45"></a>
XML I/O</h1>
<p>XML import and export is enabled, however there are some difference to the original library functions.</p>
<h2><a class="anchor" id="autotoc_md46"></a>
XML Export</h2>
<p>When exporting data in sys-sage, users can define custom functions to parse component attributes. Two distinct functions can be specified: one for simple attributes and another for complex attributes.</p>
<p>For simple attributes, the custom function must return either a string or None. The processing of the key-value pair is entirely at the user's discretion. Here's an example:</p>
<div class="fragment"><div class="line"><span class="keyword">def </span>search_custom_simple(key: str, value) -&gt; str:</div>
<div class="line">    <span class="keywordflow">if</span> <span class="stringliteral">&quot;example&quot;</span> <span class="keywordflow">in</span> key:</div>
<div class="line">        <span class="keywordflow">return</span> str(value)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
</div><!-- fragment --><p> For complex attributes, the function is expected to return a string representation of an XML node. The encapsulating root element (e.g., &lt;root&gt;&lt;/root&gt;) should be omitted. For instance:</p>
<div class="fragment"><div class="line"><span class="keyword">def </span>search_custom_complex(key: str, value) -&gt; str:</div>
<div class="line">    <span class="comment"># This function returns an XML fragment representing the complex attribute</span></div>
<div class="line">    <span class="keywordflow">return</span> f<span class="stringliteral">&quot;&lt;Attribute key=\&quot;{key}\&quot; value=\&quot;{value}\&quot;/&gt;&quot;</span></div>
</div><!-- fragment --><p> After defining your custom user functions, the export process can be initiated by calling the sys_sage.export function, passing the root component, the desired export path, and your custom functions:</p>
<div class="fragment"><div class="line">sys_sage.export(root, path, search_custom_simple, search_custom_complex)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
XML Import</h2>
<p>The XML import functionality mirrors the export function, but with key differences that are best illustrated through examples.</p>
<p>For simple attributes, all custom attributes from the XML file are passed to the user-provided custom parsing function as XML nodes (strings). Therefore, the custom function must employ string operations to extract the desired value:</p>
<div class="fragment"><div class="line"><span class="keyword">def </span>import_search_simple(x):</div>
<div class="line">    <span class="comment"># x will be an XML string like &#39;&lt;Attribute key=&quot;benchmark&quot; value=&quot;some_value&quot;/&gt;&#39;</span></div>
<div class="line">    <span class="keywordflow">if</span> <span class="stringliteral">&quot;benchmark&quot;</span> <span class="keywordflow">in</span> x:</div>
<div class="line">        y = x.split(<span class="stringliteral">&quot;value=\&quot;&quot;</span>)[-1]</div>
<div class="line">        <span class="keywordflow">return</span> y.rstrip(<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
</div><!-- fragment --><p>Similarly, for complex attributes, the XML node as a string is forwarded. However, unlike the simple attribute function, the custom function for complex attributes also gains access to the respective Component object (c). This allows for more profound modifications to the component's attributes. This function is expected to return only a success status (e.g., 1 for success, 0 for failure).</p>
<div class="fragment"><div class="line"><span class="keyword">def </span>import_search_complex(x, c):</div>
<div class="line">    <span class="comment"># x will be an XML string like &#39;&lt;Attribute key=&quot;complex&quot; value=&quot;123&quot;/&gt;&#39;</span></div>
<div class="line">    <span class="comment"># c is the Component object to which this attribute belongs</span></div>
<div class="line">    <span class="keywordflow">if</span> <span class="stringliteral">&quot;complex&quot;</span> <span class="keywordflow">in</span> x:</div>
<div class="line">        y = x.split(<span class="stringliteral">&quot;value=\&quot;&quot;</span>)[-1]</div>
<div class="line">        val = y.rstrip(<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>)</div>
<div class="line">        c[<span class="stringliteral">&quot;complex&quot;</span>] = int(val)  <span class="comment"># Modify the component&#39;s attribute directly</span></div>
<div class="line">        <span class="keywordflow">return</span> 1  <span class="comment"># Indicate success</span></div>
<div class="line">    <span class="keywordflow">return</span> 0  <span class="comment"># Indicate failure</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
